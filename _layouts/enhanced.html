---
layout: default
---

<!-- Enhanced layout with theme system -->
<div class="theme-transition">{{ content }}</div>

<!-- Theme System Assets -->
<link
  rel="stylesheet"
  href="{{ '/assets/css/theme-system.css' | relative_url }}"
/>
<script
  src="{{ '/assets/js/theme-switcher.js' | relative_url }}"
  defer
></script>

<!-- Theme-aware meta tags -->
<meta
  name="color-scheme"
  content="light dark"
/>
<meta
  name="supported-color-schemes"
  content="light dark"
/>

<style>
  /* Critical CSS for theme switching - prevent flash */
  html {
    color-scheme: light dark;
  }

  html[data-theme='dark'] {
    color-scheme: dark;
  }

  html[data-theme='light'] {
    color-scheme: light;
  }

  /* Prevent layout shift during theme loading */
  .theme-loading * {
    transition: none !important;
  }
</style>

<script>
  // Immediate theme application to prevent flash
  (function () {
    const theme = localStorage.getItem('theme') || 'auto';
    let effectiveTheme = theme;

    if (theme === 'auto') {
      effectiveTheme =
        window.matchMedia &&
        window.matchMedia('(prefers-color-scheme: dark)').matches
          ? 'dark'
          : 'light';
    }

    document.documentElement.setAttribute('data-theme', effectiveTheme);
    document.documentElement.classList.add(`theme-${theme}`);
    document.body.classList.add(`theme-${effectiveTheme}`);
  })();
</script>
